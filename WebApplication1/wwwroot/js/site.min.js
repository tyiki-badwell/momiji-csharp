window.onload=function(){"use strict";var t=[],u,r,n,f,i;window.setInterval(()=>{if(t.length>0){var n=t;t=[];fetch("/Operate/Note",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(n),mode:"same-origin",credentials:"same-origin",redirect:"error",referrer:"client"});console.log(n)}},1);u=window.performance.timing.navigationStart;document.querySelectorAll("input").forEach(n=>{n.onclick=function(){t.push({receivedTime:window.performance.timing.navigationStart+window.performance.now(),data:[Number(this.dataset.shortMessage1),Number(this.dataset.shortMessage2),Number(this.dataset.shortMessage3),Number(0)]})}});navigator.requestMIDIAccess?(n=document.querySelector("#midiout"),r=document.createElement("option"),r.text="(none)",n.appendChild(r),navigator.requestMIDIAccess({sysex:!1}).then(t=>{t.inputs.forEach(t=>{var i=document.createElement("option");i.text=t.name;i.value=t.id;n.appendChild(i)})}),n.addEventListener("change",n=>{navigator.requestMIDIAccess({sysex:!1}).then(i=>{i.inputs.forEach(i=>{n.target.value===i.id?(i.open(),i.onmidimessage=function(n){t.push({receivedTime:u+(n.receivedTime||n.timeStamp),data:Array.from(n.data)})}):(i.onmidimessage=undefined,i.close())})})})):(n=document.querySelector("#midiout"),n.remove());f=document.querySelector("#audio-area");f&&(i=new WebSocket("ws://"+document.location.host+"/ws"),i.addEventListener("open",function(){console.log("open ok.");i.send("hello.")}),i.addEventListener("message",function(n){console.log(n.data)}))};