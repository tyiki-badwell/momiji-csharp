"use strict";(()=>{function o(n,t,u,f){i.setFloat64(0,n,!0);i.setUint8(8,Number(t),!0);i.setUint8(9,Number(u),!0);i.setUint8(10,Number(f),!0);i.setUint8(11,0,!0);r.send(e)}const u=window.performance.timing.navigationStart,s=[],t=new MediaSource;var n;const f='audio/webm; codecs="opus';MediaSource.isTypeSupported(f)&&(t.addEventListener("sourceopen",i=>{console.log(i);n=t.addSourceBuffer(f);n.addEventListener("update",n=>{console.log(n)});n.addEventListener("abort",n=>{console.log(n)});n.addEventListener("error",n=>{console.log(n)});n.addEventListener("updatestart",n=>{console.log(n)});n.addEventListener("updateend",n=>{console.log(n)});const r=document.querySelector("#audio-area");r&&(r.srcObject=t,r.play())}),t.addEventListener("sourceended",n=>{console.log(n)}),t.addEventListener("sourceclose",n=>{console.log(n)}));const r=new WebSocket((document.location.protocol==="https:"?"wss://":"ws://")+document.location.host+"/ws");r.addEventListener("close",n=>{console.log(n)});r.addEventListener("open",n=>{console.log(n)});r.addEventListener("message",t=>{if(n&&!(s.length>100)){const i=new FileReader;i.addEventListener("load",t=>{n&&n.appendBuffer(t.target.result)});i.readAsArrayBuffer(t.data)}});const e=new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT+Uint8Array.BYTES_PER_ELEMENT*4),i=new DataView(e);window.onload=function(){if(document.querySelectorAll("input").forEach(n=>{n.onclick=function(){o(u+window.performance.now(),Number(this.dataset.shortMessage1),Number(this.dataset.shortMessage2),Number(this.dataset.shortMessage2))}}),navigator.requestMIDIAccess){const n=document.querySelector("#midiout");{const t=document.createElement("option");t.text="(none)";n.appendChild(t)}navigator.requestMIDIAccess({sysex:!1}).then(t=>{t.inputs.forEach(t=>{const i=document.createElement("option");i.text=t.name;i.value=t.id;n.appendChild(i)})});n.addEventListener("change",n=>{navigator.requestMIDIAccess({sysex:!1}).then(t=>{t.inputs.forEach(t=>{n.target.value===t.id?(t.open(),t.onmidimessage=function(n){o(u+(n.receivedTime||n.timeStamp),n.data.length>0?n.data[0]:0,n.data.length>1?n.data[1]:0,n.data.length>2?n.data[2]:0)}):(t.onmidimessage=undefined,t.close())})})})}else{const n=document.querySelector("#midiout");n.remove()}}})();