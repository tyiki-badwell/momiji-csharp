window.onload=function(){"use strict";var i,t,n,r;window.mixertest={};window.mixertest.pool=[];i=window.performance.timing.navigationStart;document.querySelectorAll("input").forEach(n=>{n.onclick=function(){var t=new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT+Uint8Array.BYTES_PER_ELEMENT*4),n=new DataView(t);n.setFloat64(0,window.performance.timing.navigationStart+window.performance.now(),!1);n.setUint8(8,Number(this.dataset.shortMessage1),!1);n.setUint8(9,Number(this.dataset.shortMessage2),!1);n.setUint8(10,Number(this.dataset.shortMessage3),!1);n.setUint8(11,0,!1);window.mixertest.ws.send(t)}});navigator.requestMIDIAccess?(n=document.querySelector("#midiout"),t=document.createElement("option"),t.text="(none)",n.appendChild(t),navigator.requestMIDIAccess({sysex:!1}).then(t=>{t.inputs.forEach(t=>{var i=document.createElement("option");i.text=t.name;i.value=t.id;n.appendChild(i)})}),n.addEventListener("change",n=>{navigator.requestMIDIAccess({sysex:!1}).then(t=>{t.inputs.forEach(t=>{n.target.value===t.id?(t.open(),t.onmidimessage=function(n){pool.push({receivedTime:i+(n.receivedTime||n.timeStamp),data:Array.from(n.data)})}):(t.onmidimessage=undefined,t.close())})})})):(n=document.querySelector("#midiout"),n.remove());r=document.querySelector("#audio-area");r&&(window.mixertest.ws=new WebSocket("ws://"+document.location.host+"/ws"),window.mixertest.ws.addEventListener("close",function(n){console.log(n)}),window.mixertest.ws.addEventListener("open",function(n){console.log(n);window.mixertest.ws.send("hello.")}),window.mixertest.ws.addEventListener("message",function(n){console.log(n.data)}),window.setInterval(()=>{if(window.mixertest.pool.length>0){var n=window.mixertest.pool;window.mixertest.pool=[];window.mixertest.ws.send(n)}},1))};